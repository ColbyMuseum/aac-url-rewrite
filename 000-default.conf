Listen 80

<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	ServerName aac-test.weichbild.com
	DocumentRoot /var/www/html

	LogLevel info:

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	# Based on the hostname -> shortname mapping, append the instituional shortname
	# FIXME: Manually passing images cleanly through
	RewriteEngine on
	RewriteMap shortnames "txt:/etc/apache2/shortnames.txt"
	RewriteCond ${shortnames:%{HTTP_HOST}|NONE} ^(.+)$
	RewriteCond %{REQUEST_FILENAME} !(.gif|.png|.jpg|.jpeg)$
	RewriteRule ^/(.*)$ /${shortnames:%{HTTP_HOST}}/$1 [L]

</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
